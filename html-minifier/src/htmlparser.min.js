(function(a){function p(a){var b={},c=a.split(",");for(var d=0;d<c.length;d++)b[c[d]]=!0,b[c[d].toUpperCase()]=!0;return b}var b=/^<(\w+)((?:\s*[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,c=/^<\/(\w+)[^>]*>/,d=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,e=/^<!DOCTYPE [^>]+>/i,f=p("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),g=p("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),h=p("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),i=p("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),j=p("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),k=p("script,style"),l={},m,n,o=a.HTMLParser=function(a,n){function w(a,b,c,e){if(g[b])while(r.last()&&h[r.last()])x("",r.last());i[b]&&r.last()==b&&x("",b),e=f[b]||!!e,e||r.push(b);if(n.start){var k=[];c.replace(d,function(a,b){var c=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:j[b]?b:"";k.push({name:b,value:c,escaped:c.replace(/(^|[^\\])"/g,'$1\\"')})}),n.start&&n.start(b,k,e)}}function x(a,b){if(!b)var c=0;else for(var c=r.length-1;c>=0;c--)if(r[c]==b)break;if(c>=0){for(var d=r.length-1;d>=c;d--)n.end&&n.end(r[d]);r.length=c}}var o,p,q,r=[],s=a;r.last=function(){return this[this.length-1]};while(a){p=!0;if(!r.last()||!k[r.last()]){a.indexOf("<!--")===0?(o=a.indexOf("-->"),o>=0&&(n.comment&&n.comment(a.substring(4,o)),a=a.substring(o+3),p=!1)):(q=e.exec(a))?(n.doctype&&n.doctype(q[0]),a=a.substring(q[0].length),p=!1):a.indexOf("</")===0?(q=a.match(c),q&&(a=a.substring(q[0].length),q[0].replace(c,x),p=!1)):a.indexOf("<")===0&&(q=a.match(b),q&&(a=a.substring(q[0].length),q[0].replace(b,w),p=!1));if(p){o=a.indexOf("<");if(n.options&&n.options.skipTemplateTags){var t=n.options.skipTemplateTags;for(var u=0;u<t.length;u++)a.indexOf(t[u][0])!==-1&&(o=a.indexOf(t[u][1])+2)}var v=o<0?a:a.substring(0,o);a=o<0?"":a.substring(o),n.chars&&n.chars(v)}}else m=r.last().toLowerCase(),reStackedTag=l[m]||(l[m]=new RegExp("([\\s\\S]*?)</"+m+"[^>]*>","i")),a=a.replace(reStackedTag,function(a,b){return m!=="script"&&m!=="style"&&(b=b.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)\]\]>/g,"$1")),n.chars&&n.chars(b),""}),x("",m);if(a==s)throw"Parse Error: "+a;s=a}x()};a.HTMLtoXML=function(a){var b="";return o(a,{start:function(a,c,d){b+="<"+a;for(var e=0;e<c.length;e++)b+=" "+c[e].name+'="'+c[e].escaped+'"';b+=(d?"/":"")+">"},end:function(a){b+="</"+a+">"},chars:function(a){b+=a},comment:function(a){b+="<!--"+a+"-->"}}),b},a.HTMLtoDOM=function(a,b){var c=p("html,head,body,title"),d={link:"head",base:"head"};b?b=b.ownerDocument||b.getOwnerDocument&&b.getOwnerDocument()||b:typeof DOMDocument!="undefined"?b=new DOMDocument:typeof document!="undefined"&&document.implementation&&document.implementation.createDocument?b=document.implementation.createDocument("","",null):typeof ActiveX!="undefined"&&(b=new ActiveXObject("Msxml.DOMDocument"));var e=[],f=b.documentElement||b.getDocumentElement&&b.getDocumentElement();!f&&b.createElement&&function(){var a=b.createElement("html"),c=b.createElement("head");c.appendChild(b.createElement("title")),a.appendChild(c),a.appendChild(b.createElement("body")),b.appendChild(a)}();if(b.getElementsByTagName)for(var g in c)c[g]=b.getElementsByTagName(g)[0];var h=c.body;return o(a,{start:function(a,f,g){if(c[a]){h=c[a];return}var i=b.createElement(a);for(var j in f)i.setAttribute(f[j].name,f[j].value);d[a]&&typeof c[d[a]]!="boolean"?c[d[a]].appendChild(i):h&&h.appendChild&&h.appendChild(i),g||(e.push(i),h=i)},end:function(a){e.length-=1,h=e[e.length-1]},chars:function(a){h.appendChild(b.createTextNode(a))},comment:function(a){}}),b}})(typeof exports=="undefined"?this:exports)