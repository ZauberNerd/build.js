(function(a){function d(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}function e(a){return a.replace(/\s+/g," ")}function f(a){return/\[if[^\]]+\]/.test(a)}function g(a){return/^on[a-z]+/.test(a)}function h(a){return/^[a-zA-Z0-9-._:]+$/.test(a)}function i(a,b){for(var c=a.length;c--;)if(a[c].name.toLowerCase()===b)return!0;return!1}function j(a,b,c,e){return c=d(c.toLowerCase()),a==="script"&&b==="language"&&c==="javascript"||a==="form"&&b==="method"&&c==="get"||a==="input"&&b==="type"&&c==="text"||a==="script"&&b==="charset"&&!i(e,"src")||a==="a"&&b==="name"&&i(e,"id")||a==="area"&&b==="shape"&&c==="rect"}function k(a,b,c){return a==="script"&&b==="type"&&d(c.toLowerCase())==="text/javascript"}function l(a,b,c){return(a==="style"||a==="link")&&b==="type"&&d(c.toLowerCase())==="text/css"}function m(a){return/^(?:checked|disabled|selected|readonly)$/.test(a)}function n(a,b){return/^(?:a|area|link|base)$/.test(b)&&a==="href"||b==="img"&&/^(?:src|longdesc|usemap)$/.test(a)||b==="object"&&/^(?:classid|codebase|data|usemap)$/.test(a)||b==="q"&&a==="cite"||b==="blockquote"&&a==="cite"||(b==="ins"||b==="del")&&a==="cite"||b==="form"&&a==="action"||b==="input"&&(a==="src"||a==="usemap")||b==="head"&&a==="profile"||b==="script"&&(a==="src"||a==="for")}function o(a,b){return/^(?:a|area|object|button)$/.test(b)&&a==="tabindex"||b==="input"&&(a==="maxlength"||a==="tabindex")||b==="select"&&(a==="size"||a==="tabindex")||b==="textarea"&&/^(?:rows|cols|tabindex)$/.test(a)||b==="colgroup"&&a==="span"||b==="col"&&a==="span"||(b==="th"||b=="td")&&(a==="rowspan"||a==="colspan")}function p(a,b,c){return g(b)?d(c).replace(/^javascript:\s*/i,"").replace(/\s*;$/,""):b==="class"?e(d(c)):n(b,a)||o(b,a)?d(c):b==="style"?d(c).replace(/\s*;\s*$/,""):c}function q(a){return a.replace(/^(\[[^\]]+\]>)\s*/,"$1").replace(/\s*(<!\[endif\])$/,"$1")}function r(a){return a.replace(/^(?:\s*\/\*\s*<!\[CDATA\[\s*\*\/|\s*\/\/\s*<!\[CDATA\[.*)/,"").replace(/(?:\/\*\s*\]\]>\s*\*\/|\/\/\s*\]\]>)\s*$/,"")}function u(a,b){return a.replace(s[b],"").replace(t[b],"")}function v(a){return/^(?:html|t?body|t?head|tfoot|tr|option)$/.test(a)}function x(a,b,c){var d=/^(["'])?\s*\1$/.test(c);return d?a==="input"&&b==="value"||w.test(b):!1}function y(a){return a!=="textarea"}function z(a){return!/^(?:script|style|pre|textarea)$/.test(a)}function A(a){return!/^(?:pre|textarea)$/.test(a)}function B(a,b,c,d){var e=a.name.toLowerCase(),f=a.escaped,g;if(d.removeRedundantAttributes&&j(c,e,f,b)||d.removeScriptTypeAttributes&&k(c,e,f)||d.removeStyleLinkTypeAttributes&&l(c,e,f))return"";f=p(c,e,f);if(!d.removeAttributeQuotes||!h(f))f='"'+f+'"';return d.removeEmptyAttributes&&x(c,e,f)?"":(d.collapseBooleanAttributes&&m(e)?g=e:g=e+"="+f," "+g)}function C(a,g){g=g||{},a=d(a);var h=[],i=[],j="",k="",l=[],m=[],n=g.lint,o=g.handleScript||!1,p=g.handleStyle||!1,s=new Date;c(a,{options:{skipTemplateTags:g.skipTemplateTags||!1},start:function(a,b,c){a=a.toLowerCase(),k=a,j="",g.collapseWhitespace&&(A(a)||l.push(a),z(a)||m.push(a)),i.push("<",a),n&&n.testElement(a);for(var d=0,e=b.length;d<e;d++)n&&n.testAttribute(a,b[d].name.toLowerCase(),b[d].escaped),i.push(B(b[d],b,a,g));i.push(">")},end:function(a){g.collapseWhitespace&&(l.length&&a==l[l.length-1]&&l.pop(),m.length&&a==m[m.length-1]&&m.pop());var b=j===""&&a===k;if(g.removeEmptyElements&&b&&y(a)){i.splice(i.lastIndexOf("<"));return}if(g.removeOptionalTags&&v(a))return;i.push("</",a.toLowerCase(),">"),h.push.apply(h,i),i.length=0,j=""},chars:function(a){if(k==="script"||k==="style")g.removeCommentsFromCDATA&&(a=u(a,k)),g.removeCDATASectionsFromCDATA&&(a=r(a)),p&&k==="style"&&(a=p(a)),o&&k==="script"&&(a=o(a));g.collapseWhitespace&&(!l.length&&A(k)&&(a=d(a)),!m.length&&z(k)&&(a=e(a))),j=a,n&&n.testChars(a),i.push(a)},comment:function(a){g.removeComments?f(a)?a="<!--"+q(a)+"-->":a="":a="<!--"+a+"-->",i.push(a)},doctype:function(a){i.push(g.useShortDoctype?"<!DOCTYPE html>":e(a))}}),h.push.apply(h,i);var t=h.join("");return b("minified in: "+(new Date-s)+"ms"),t}var b,c;a.console&&a.console.log?b=function(b){a.console.log(b)}:b=function(){},a.HTMLParser?c=a.HTMLParser:typeof require=="function"&&(c=require("./htmlparser").HTMLParser),String.prototype.trim&&(d=function(a){return a.trim()});var s={script:/^\s*(?:\/\/)?\s*<!--.*\n?/,style:/^\s*<!--\s*/},t={script:/\s*(?:\/\/)?\s*-->\s*$/,style:/\s*-->\s*$/},w=new RegExp("^(?:class|id|style|title|lang|dir|on(?:focus|blur|change|click|dblclick|mouse(?:down|up|over|move|out)|key(?:press|down|up)))$");a.minify=C})(typeof exports=="undefined"?this:exports)